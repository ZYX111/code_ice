<!DOCTYPE HTML>
<html>
    <head>
        <meta charset="utf-8">
        <title>11122</title>
    </head>
    <body>
        <p id="demo" onclick="ifRun({x:1,y:3},{x:5,y:7})">5</p>
        <script>
            var map=[[1,1,1,1,1,0,0,0,0],
                     [1,0,0,9,1,0,0,0,0],
                     [1,0,2,0,1,0,1,1,1],
                     [1,0,2,0,1,0,1,4,1],
                     [1,1,1,0,1,1,1,3,1],
                     [0,1,1,0,0,0,0,3,1],
                     [0,1,0,0,0,1,0,0,1],
                     [0,1,0,0,0,1,1,1,1],
                     [0,1,1,1,1,1,0,0,0]];
                function ifRun(a/*peo（人的坐标）*/,b/*终点坐标*/){
                    var key=new Array();
            var map1=[[1,1,1,1,1,0,0,0,0],
                     [1,0,0,9,1,0,0,0,0],
                     [1,0,2,0,1,0,1,1,1],
                     [1,0,2,0,1,0,1,4,1],
                     [1,1,1,0,1,1,1,3,1],
                     [0,1,1,0,0,0,0,3,1],
                     [0,1,0,0,0,1,0,0,1],
                     [0,1,0,0,0,1,1,1,1],
                     [0,1,1,1,1,1,0,0,0]];//0→空,1→墙,2→箱子,3→点,4→箱子在点上,9→人
                    var dir=[{x:1,y:0},{x:0,y:1},{x:-1,y:0},{x:0,y:-1}];
                               
                    function fun(x,y,d) {
                        if (map1[x][y] == 0||map1[x][y] == 3) {
                            key.push(d);
                            if(b.x==x&&b.y==y){
                                return key.toString();
                            }
                            map1[x][y] = -1;
                            for (var i = 0; i < 4; i++) {
                                fun(x + dir[i].x, y + dir[i].y,i);
                            }
                            key.pop();
                            map1[x][y] = 0;
                        }
                        else if(map1[x][y]==9){
                            for(var i=0;i<4;i++){
                                fun(x+dir[i].x,y+dir[i].y,i);
                            }
                        }
                    }
                    fun(a.x,a.y,0);
                    //a传入的是一个{x,y}值，判断以玩家现在的位置是否能走到该点，如果能记录如何走到的键位顺序到key中并运行ifPush()函数
                    document.getElementById("demo").innerHTML=key.toString();
                }                
        </script>
    </body>
</html>